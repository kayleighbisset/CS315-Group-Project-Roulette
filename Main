import random

# Roulette wheel using an array
class Wheel:
    def __init__(self, seed=None):
        self.rng = random.Random(seed)
        # This list represents all the slots (pockets) on a roulette wheel.
        # '0' and '00' are special green pockets, and 1–36 are red or black.
        # Since Python lists can't store "00" directly as a separate number, we use -1 to represent "00".
        self.pockets = [0, -1] + list(range(1, 37))  # -1 = 00
        self.size = len(self.pockets)
        self.index = 0

    def spin(self):
        # spin the wheel by moving forward a random number of steps
        # modulo makes it wrap around the list (circular array)
        steps = self.rng.randint(0, self.size * 5)
        self.index = (self.index + steps) % self.size
        return self.pockets[self.index]

def fmt_pocket(v):
    return "00" if v == -1 else str(v)

# Color sets
RED = {1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36}
BLACK = set(range(1, 37)) - RED

def get_color(num):
    if num in RED:
        return "RED"
    elif num in BLACK:
        return "BLACK"
    else:
        return "GREEN"

def main():
    print("Welcome to Roulette!")
    # ask the user how much money they want to start with
    money = int(input("How much money do you want to start with? $"))
    wheel = Wheel()
    round_Num = 1

    while money > 0:
        print(f"You current have ${money}.\n")
        print("\n")
        print(f"***Round {round_Num}***\n")
        print("\n")

        bet_Amnt = int(input("How much would you like to bet? $"))
        if bet_Amnt > money:
            print(f"Invalid input. Bet amount cannot be greater than your current money value {money}. Please Try again.\n")
            continue
        elif bet_Amnt <= 0:
            print(f"Invalid input. Bet amount cannot be equal or less than 0. Please input again.")
            continue

        validBetChoice = False
        while validBetChoice == False:
            print("What kind of bet would you like to make?\n")
            print("1=Straight(Single Number), \n 2 = Even/Odd, \n 3 = High/Low(1-18 or 19-36),\n 4 = Red/Black,\n 5 = Split \n")
            # don't use input(print(...)); print returns None
            print("Enter your bet choice(1-5): ")
            bet_Choice = int(input())
            if 1 <= bet_Choice <= 5:
                validBetChoice = True
            else:
                print("\nInvlaid input. Please enter a number 1 through 5.\n")

        betType = ""

        
        if bet_Choice == 1:
            validStraight = False
            while validStraight == False:
                print("You choose bet #1\n")
                straightChoice = int(input("Choose a number 0-36, or -1(for 00), to place a straight bet upon: "))
                if straightChoice == -1 or straightChoice <= 36:
                    validStraight = True
                    betType = "Straight Bet"
                    print(f"You placed a straight bet on: {straightChoice}")
                else:
                    print("Invalid input. Please Reenter an integer, -1 for 00, or 0-36: \n")

            result = wheel.spin()
            print(f"Wheel landed on {fmt_pocket(result)} ({get_color(result)})")

            if result == straightChoice:
                money += bet_Amnt * 35   # payout multiple
                print("You WIN!")
            else:
                money -= bet_Amnt
                print("You lost.")

        
        elif bet_Choice == 2:
            validEvenOdd = False
            while validEvenOdd == False:
                even_Odd_Choice = input("Choose even or odd for your bet (E/O): ").upper()
                if even_Odd_Choice == 'E':
                    validEvenOdd = True
                    betType = "Even Bet"
                    print("You have placed a bet on all EVEN numbers.")
                elif even_Odd_Choice == 'O':
                    validEvenOdd = True
                    betType = "Odd Bet"
                    print("You have placed a bet on all ODD numbers")
                else:
                    print("Invalid Input. Please enter 'E' for even and 'O' for odd bets: \n")

            result = wheel.spin()
            print(f"Wheel landed on {fmt_pocket(result)} ({get_color(result)})")

            if result in (0, -1):
                money -= bet_Amnt
                print("0/00 – House wins.")
            else:
                if (even_Odd_Choice == "E" and result % 2 == 0) or (even_Odd_Choice == "O" and result % 2 == 1):
                    money += bet_Amnt * 1   # payout multiple
                    print("You WIN!")
                else:
                    money -= bet_Amnt
                    print("You lost.")

        
        elif bet_Choice == 3:
            validHighLow = False
            while validHighLow == False:
                high_low = input("Choose either High(19-36) or Low(1-18) bet, (H/L): ").upper()
                if high_low == 'H':
                    validHighLow = True
                    betType = "High Bet"
                    print("You have placed a bet on all High numbers(19-36).")
                elif high_low == 'L':
                    validHighLow = True
                    betType = "Low Bet"
                    print("You have placed a bet on all LOW numbers (1-18)\n")
                else:
                    print("Invalid input. Please enter 'H' for high bets(19-36) and 'L' for low bets(1-18): ")

            result = wheel.spin()
            print(f"Wheel landed on {fmt_pocket(result)} ({get_color(result)})")

            if result in (0, -1):
                money -= bet_Amnt
                print("0/00 – House wins.")
            else:
                if (high_low == 'H' and 19 <= result <= 36) or (high_low == 'L' and 1 <= result <= 18):
                    money += bet_Amnt * 1   # payout multiple
                    print("You WIN!")
                else:
                    money -= bet_Amnt
                    print("You lost.")

        
        elif bet_Choice == 4:
            validColor = False
            while validColor == False:
                color = input("Choose red or black (R/B): ").upper()
                if color == 'R':
                    validColor = True
                    betType = "Red Bet"
                elif color == 'B':
                    validColor = True
                    betType = "Black Bet"
                else:
                    print("Invalid input. Please enter 'R' for bets on red and 'B' for bets on black: ")

            result = wheel.spin()
            print(f"Wheel landed on {fmt_pocket(result)} ({get_color(result)})")

            if result in (0, -1):
                money -= bet_Amnt
                print("0/00 – House wins.")
            else:
                if (color == 'R' and get_color(result) == "RED") or (color == 'B' and get_color(result) == "BLACK"):
                    money += bet_Amnt * 1   # payout multiple
                    print("You WIN!")
                else:
                    money -= bet_Amnt
                    print("You lost.")

        
        elif bet_Choice == 5:
            print("A split bet will choose between two numbers.\n")
            validSplit = False
            while validSplit == False:
                split1 = int(input("Enter the first number(0-36): "))
                split2 = int(input("Enter the second number(0-36): "))
                if split1 == split2:
                    print("Invalid Input. The two inputs cannot be the same. Please reenter your inputs(0-36): ")
                elif not (0 <= split1 <= 36 and 0 <= split2 <= 36):
                    print("Invalid Input. Inputs cannot be less than 0 or greater than 36. Please reenter your input(0-36): ")
                else:
                    validSplit = True
                    print(f"\n You placed a split bet on: {split1} and {split2}")

            result = wheel.spin()
            print(f"Wheel landed on {fmt_pocket(result)} ({get_color(result)})")

            if result == split1 or result == split2:
                money += bet_Amnt * 17   # payout multiple
                print("You WIN!")
            else:
                money -= bet_Amnt
                print("You lost.")

        else:
            print("Invalid bet choice.")
            continue

        round_Num += 1
        print(f"You current have ${money}.\n")

    print("You ran out of money. Game over!")

main()
